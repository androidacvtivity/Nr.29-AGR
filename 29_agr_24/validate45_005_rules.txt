
// Validation function for CAP1: row 1230 columns 1-5 equals the sum of rows 1231 to 1236 columns 1-5
function validate45_005(values) {
    var colNames = ["C1", "C2", "C3", "C4", "C5"];
    for (var col of colNames) {
        var col_1230 = !isNaN(Number(values["CAP1_R1230_" + col])) ? Number(values["CAP1_R1230_" + col]) : 0;
        var col_sum = 0;

        // Sum rows 1231 to 1236 for the current column
        for (var row = 1231; row <= 1236; row++) {
            col_sum += !isNaN(Number(values["CAP1_R" + row + "_" + col])) ? Number(values["CAP1_R" + row + "_" + col]) : 0;
        }

        if (col_1230 !== col_sum) {
            webform.errors.push({
                'fieldName': 'CAP1_R1230_' + col,
                'weight': 6,
                'msg': Drupal.t('Cod eroare: 45-005. Rând.1230 col. ' + col + ' trebuie să fie egală cu suma rândurilor 1231-1236 col. ' + col + '. Valoarea rândului 1230: ' + col_1230 + ', suma calculată: ' + col_sum)
            });
        }
    }
}

// Validation function for CAP1 FILIAL: row 1230 columns 1-5 equals the sum of rows 1231 to 1236 columns 1-5
function validate45_005_F(values) {
    var colNames = ["C1", "C2", "C3", "C4", "C5"];
    for (var j = 0; j < values.CAP_NUM_FILIAL.length; j++) {
        var CAP_CUATM_FILIAL = isNaN(String(values.CAP_CUATM_FILIAL[j])) ? "" : String(values.CAP_CUATM_FILIAL[j]);

        for (var col of colNames) {
            var col_1230_F = values["CAP1_R1230_" + col + "_FILIAL"] && !isNaN(Number(values["CAP1_R1230_" + col + "_FILIAL"][j]))
                ? Number(values["CAP1_R1230_" + col + "_FILIAL"][j])
                : 0;
            var col_sum_F = 0;

            // Sum rows 1231 to 1236 for the current column
            for (var row = 1231; row <= 1236; row++) {
                if (values["CAP1_R" + row + "_" + col + "_FILIAL"] && !isNaN(Number(values["CAP1_R" + row + "_" + col + "_FILIAL"][j]))) {
                    col_sum_F += Number(values["CAP1_R" + row + "_" + col + "_FILIAL"][j]);
                }
            }

            if (col_1230_F !== col_sum_F) {
                webform.errors.push({
                    'fieldName': 'CAP1_R1230_' + col + '_FILIAL',
                    'index': j,
                    'weight': 6,
                    'msg': Drupal.t('Raion: @CAP_CUATM_FILIAL - Cod eroare: 45-005-F. Rând.1230 col. ' + col + ' trebuie să fie egală cu suma rândurilor 1231-1236 col. ' + col + '. Valoarea rândului 1230: ' + col_1230_F + ', suma calculată: ' + col_sum_F, {
                        '@CAP_CUATM_FILIAL': CAP_CUATM_FILIAL
                    })
                });
            }
        }
    }
}
